{% extends "base.html" %}
{% load static %}

{% block content %}
  <div class="business-details-section">
    <div class="layout">
      <div>
        <div class="business-category">
            <span class="business-category-text">{{ object.sector.label }}</span>
            <span>
              <img src="{% static 'images/accomodation.svg' %}" />
            </span>
        </div>
        <div class="business-name">
          {% firstof object.supplied_name object.registered_name %}
        </div>
        {% if object.description %}
        <div class="business-description">{{ object.description }}</div>
        {% endif %}
      </div>
      <div class="business-profile-cards">
        <details class="mdc-expansion mdc-theme--background mdc-elevation--z2">
          <summary class="mdc-expansion__summary">
            <span class="business-profile-location mdc-list-item">
              <i class="material-icons mdc-list-item__graphic" aria-hidden="true">location_on</i>
              <span class="mdc-expansion__header">{{ object.region }}</span>
            </span>
            <i class="material-icons mdc-list-item__graphic arrow-down" aria-hidden="true">keyboard_arrow_down</i>
          </summary>
          <div class="mdc-expansion__content">
            <span class="mdc-expansion__header address-detail">{% firstof object.supplied_physical_address object.registered_physical_address %}</span>
          </div>
        </details>
        <details class="mdc-theme--background mdc-elevation--z2">
          <summary class="mdc-expansion__summary">
            <span class="business-profile-location mdc-list-item">
              <span class="status-icon-span">
                <img class="status-icon" src="{% static 'images/ellipse.svg' %}" />
              </span>
              <span class="type-header">Status:</span>
              <span class="mdc-expansion__header">{{ object.registration_status.label }}</span>
            </span>
            <div data-tooltip="Indicates the current registration status of the business. A business's status can range from being In business or Deregistered to Closed.">
              <i class="material-icons mdc-list-item__graphic" aria-hidden="true">info</i>
            </div>
          </summary>
        </details>
        <details class="mdc-theme--background mdc-elevation--z2">
          <summary class="mdc-expansion__summary">
            <span class="business-profile-location mdc-list-item">
              <i class="material-icons mdc-list-item__graphic" aria-hidden="true">work</i>
              <span class="type-header">Type:</span>
              <span class="mdc-expansion__header">{{ object.registered_business_type.label }}</span>
            </span>
            <div data-tooltip="Describes the type of business registered, such as private company and non-profit company for example.">
              <i class="material-icons mdc-list-item__graphic" aria-hidden="true">info</i>
            </div>
          </summary>
        </details>
        <details class="mdc-theme--background mdc-elevation--z2">
          <summary class="mdc-expansion__summary">
            <span class="business-profile-location mdc-list-item">
              <span class="registration-icon-span">
                <img class="registration-icon" src="{% static 'images/content-paste.svg' %}" />
              </span>
              <span class="type-header">Reg:</span>
              <span class="mdc-expansion__header">{{ object.registration_number }}</span>
            </span>
            <div data-tooltip="Indicates the registration number of the business.">
              <i class="material-icons mdc-list-item__graphic" aria-hidden="true">info</i>
            </div>
          </summary>
        </details>



        {% if request.user.is_staff %}
        <details class="mdc-expansion mdc-theme--background mdc-elevation--z2">
          <summary class="mdc-expansion__summary">
            <span class="business-profile-location mdc-list-item">
              <i class="material-icons mdc-list-item__graphic" aria-hidden="true">account_circle</i>
              <span class="type-header">Directors:</span>
              <span class="mdc-expansion__header">{{ object.get_directors | length }}</span>
            </span>
            <i class="material-icons mdc-list-item__graphic arrow-down" aria-hidden="true">keyboard_arrow_down</i>
          </summary>
          <div class="mdc-expansion__content">
            {% for director in object.get_directors %}
            <div class="directors-details">
              <span class="mdc-expansion__header director-first-name">{{ director.first_names }}</span>
              <span class="mdc-expansion__header director-last-name">{{ director.last_name }}</span>
            </div>
            {% endfor %}
          </div>
        </details>
        {% endif %}



      </div>
      {% if current_site.municipality.add_update_business_url %}
      <div class="business-profile-more-details">
        <p class="more-details-text">Want to add more details?</p>
        <a href="{{ current_site.municipality.add_update_business_url }}">
          <button class="mdc-button more-details-button">
            <span class="mdc-button__label">Claim this business</span>
          </button>
        </a>
      </div>
      {% endif %}
    </div>
  </div>
</div>

{% endblock content %}
